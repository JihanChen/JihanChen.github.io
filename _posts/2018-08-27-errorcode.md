---
layout: postlayout
title: 错误码定义参考
categories: [java]
tags: [validation]
---

使用@Validated，@Valid等校验参数，或者系统中抛出业务异常的错误码和错误描述时候，错误码将如何去定义。

## 说明
错误码定义的好坏将会影响系统以后的维护成本和开发人员的时间成本，错误码的定义应该具有相应的规则规范，看到错误码就基本知道什么原因产生的，快速定位。

## 定义规则

### 纯数字定义
qq的openapi接口错误（[http://wiki.open.qq.com/wiki/公共返回码说明#OpenAPI_V3.0_.E8.BF.94.E5.9B.9E.E7.A0.81](http://wiki.open.qq.com/wiki/%E5%85%AC%E5%85%B1%E8%BF%94%E5%9B%9E%E7%A0%81%E8%AF%B4%E6%98%8E#OpenAPI_V3.0_.E8.BF.94.E5.9B.9E.E7.A0.81)）

| 错误码   | 含义说明                                      |
| -------- | --------------------------------------------- |
| **1**    | 请求参数错误                                  |
| **2**    | 用户没有开通对应的平台（朋友、空间、微博...） |
| **1000** | 非法操作，通常是进行了不被授权的操作          |
| **1001** | 服务器繁忙，通常是后台出错                    |

比如可以做如下方式定义错误（参考新浪微博api）

 \#10001  1开始系统级别代码,2开始是业务级别代码  #20001

 \#20102  2 业务级别  01 业务模块代码比如短信业务  02表示短信模块具体的错误码

### 纯字母定义
支付宝的开发接口（<https://docs.open.alipay.com/api_1/alipay.trade.fastpay.refund.query/>）

| 错误码           | 错误描述             | 解决方案                                           |
| ---------------- | -------------------- | -------------------------------------------------- |
| ACQ.SYSTEM_ERROR | 系统错误             | 重新发起请求                                       |
| TRADE_NOT_EXIST  | 查询退款的交易不存在 | 确认交易号是否为正确的支付宝交易号，修改后重新查询 |

错误码字母方式定义，如交易不存在TRADE_NOT_EXIST，其他具体场景就定义场景异常

比如可以做如下方式定义错误(模块_错误描述)

\#ORDER_NOT_EXIST  订单模块订单不存在

\#USER_NAME_INVALID 用户模块用户名称不正确

再细分点可以定义  (项目_模块_错误描述)

\#OPENAPI_ORDER_NOT_EXIST  开放平台的订单相关订单不存在



### 字母和数字混合定义

| 错误码                 | 含义说明     |
| ---------------------- | ------------ |
| **SYSTEM_COMMON_1000** | 系统错误     |
| **SYSTEM_COMMON_1001** | 系统参数丢失 |

定义格式为：项目_数字编排    加强版本：项目_模块or类型_数字编排

\#OPENAPI_0001  开放平台订单不存在

\#OPENAPI_ORDER_0001 开放平台订单不存在



## 结尾

上面只是对一部分开放平台api接口做了参考定义，可能还有存在其他方式的定义处理，所有的规范定义只是为了帮助开发人员更好的管理错误码和错误描述，节约时间成本，有更多的时间去玩耍。


